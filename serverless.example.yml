service: everhour-and-google-calendar
frameworkVersion: '3'

provider:
  name: aws
  environment:
    EVER_HOUR_API: 
    EVER_HOUR_TOKEN: 
    TIME_ZONE: 
    SLACK_BOT_TOKEN: 
    REPORT_CHANNEL_ID:
    CALENDAR_NAME:
  runtime: nodejs18.x

	
package:
  patterns:
    - 'token.json'
    - 'credentials.json'
    - 'report.ts'
	
plugins:
  - serverless-plugin-typescript
  - serverless-tscpaths

functions:
  cronHandler:
    handler: index.run
    events:
      # Invoke Lambda function every 30 minutes
      - schedule: rate(30 minutes)
  reportHandler:
    handler: report.run
    events:
      # Invoke Lambda function 05:00 AM (UTC+0) every day
      - schedule: cron(00 00 * * ? *)
